<html>
    <head>
        <link rel="stylesheet" href="Gift website.css">
        <style>
            html {
              font-family: sans-serif;
            }
      
            body {
              width: 50%;
              max-width: 800px;
              min-width: 480px;
              margin: 0 auto;
            }
            
            .form input[type="number"] {
              width: 200px;
            }
      
            .lastResult {
              color: rgb(3, 36, 88);
              padding: 3px;
              font-size:30px;
            }
          </style>
    </head>    
    <body>
        <div>
        <h1 class="title"></h1>
        <h3 class="text"></h3>
        </div>
        <div class="form">
            <label for="guessField">Enter a guess: </label>
            <input type="number" min="1" max="100" required id="guessField" class="guessField">
            <input type="submit" value="提交猜测" class="guessSubmit">
        </div>
        <div class="resultParas">
            <p class="guessesTime"></p>
            <p class="guesses"></p>
            <p class="lastResult"></p>
            <p class="lOrh"></p>
        </div>
        <p id="id"></p>
        <script>
            window.onload = function() {
                var type = sessionStorage.getItem('id');
                if (type === '猜数字1') {
                let randomNumber = Math.floor(Math.random() * 100) + 1;
                // let randomNumber = 10;
                const guesses = document.querySelector('.guesses');
                const lastResult = document.querySelector('.lastResult');
                const lOrh = document.querySelector('.lOrh');
                const guessSubmit = document.querySelector('.guessSubmit');
                const guessesTime = document.querySelector('.guessesTime');
                const guessField = document.querySelector('.guessField');
                let guessCount = 1;
                let resetButton;
                const title = document.querySelector('.title');
                const text = document.querySelector('.text');
                title.textContent='猜数字-1级'
                text.textContent='我会从1-100里选一个数字，你一共有8次猜测机会，每次猜测我会告诉你是猜大了还是猜小了。'
                function Guess() {
                    const userGuess=Number(guessField.value);
                    if(guessCount === 1) {
                        guesses.textContent='历史猜测：';
                    }
                    guesses.textContent += userGuess + ' ';
                    //
                    if(userGuess === randomNumber) {
                        lastResult.textContent="你猜出来了！真厉害！请返回主页再次进入以查看内容！";
                        lastResult.style.backgroundColor='green';
                        lOrh.textContent='';
                        setGameOver1();
                    }else if(guessCount === 8) {
                        lastResult.textContent='哎...你没猜到啊，加油吧';
                        lastResult.style.backgroundColor='red';
                        lOrh.textContent='';
                        setGameOver2();
                    } else {
                        if(userGuess < randomNumber){
                            lastResult.textContent='诶呀，你猜的太小了！';
                        } else {
                            lastResult.textContent='嘶，你猜的太大了...';
                        }
                    }
                    //
                    guessesTime.textContent= '你还剩' + (8 - guessCount)+'次猜测机会';
                    guessCount++;
                    guessField.value="";
                    guessField.focus();
                }
                guessSubmit.addEventListener('click',Guess);
                //
                function setGameOver1(){
                    guessField.disabled = true;
                    guessSubmit.disabled = true;
                    resetButton = document.createElement('a1');
                    resetButton.textContent = '返回 Back';
                    document.body.appendChild(resetButton);
                    resetButton.addEventListener('click', retrun_to_gift1);
                }
                function setGameOver2(){
                    guessField.disabled = true;
                    guessSubmit.disabled = true;
                    resetButton = document.createElement('a1');
                    resetButton.textContent = '返回 Back';
                    document.body.appendChild(resetButton);
                    resetButton.addEventListener('click', retrun_to_gift2);
                }
                function retrun_to_gift1(){
                    sessionStorage.setItem('bk','1');
                    location.href='Gift index.html'
                }
                function retrun_to_gift2(){
                    sessionStorage.setItem('bk','0');
                    location.href='Gift index.html'
                }
            } else if (type === '猜数字2') {
                let randomNumber = Math.floor(Math.random() * 90) + 1;
                // let randomNumber = 10;
                const guesses = document.querySelector('.guesses');
                const lastResult = document.querySelector('.lastResult');
                const lOrh = document.querySelector('.lOrh');
                const guessSubmit = document.querySelector('.guessSubmit');
                const guessesTime = document.querySelector('.guessesTime');
                const guessField = document.querySelector('.guessField');
                let guessCount = 1;
                let resetButton;
                const title = document.querySelector('.title');
                const text = document.querySelector('.text');
                title.textContent='猜数字-2级！'
                text.textContent='你来到了第2级呀！接下来我会从1-90里选一个数字，你一共有5次猜测机会，每次猜测我会告诉你是猜大了还是猜小了。'
                function Guess(){
                    const userGuess=Number(guessField.value);
                    if(guessCount === 1) {
                        guesses.textContent='历史猜测：';
                    }
                    guesses.textContent += userGuess + ' ';
                    //
                    if(userGuess === randomNumber) {
                        lastResult.textContent="你猜出来了！真厉害！请返回主页再次进入以查看内容！";
                        lastResult.style.backgroundColor='green';
                        lOrh.textContent='';
                        setGameOver1();
                    }else if(guessCount === 5) {
                        lastResult.textContent='哎...你没猜到啊，加油吧';
                        lastResult.style.backgroundColor='red';
                        lOrh.textContent='';
                        setGameOver2();
                    } else {
                        if(userGuess < randomNumber){
                            lastResult.textContent='诶呀，你猜的太小了！';
                        } else {
                            lastResult.textContent='嘶，你猜的太大了...';
                        }
                    }
                    //
                    guessesTime.textContent= '你还剩' + (5 - guessCount)+'次猜测机会';
                    guessCount++;
                    guessField.value="";
                    guessField.focus();
                }
                guessSubmit.addEventListener('click',Guess);
                //
                function setGameOver1(){
                    guessField.disabled = true;
                    guessSubmit.disabled = true;
                    resetButton = document.createElement('a1');
                    resetButton.textContent = '返回 Back';
                    document.body.appendChild(resetButton);
                    resetButton.addEventListener('click', retrun_to_gift1);
                }
                function setGameOver2(){
                    guessField.disabled = true;
                    guessSubmit.disabled = true;
                    resetButton = document.createElement('a1');
                    resetButton.textContent = '返回 Back';
                    document.body.appendChild(resetButton);
                    resetButton.addEventListener('click', retrun_to_gift2);
                }
                function retrun_to_gift1(){
                    sessionStorage.setItem('ck','1');
                    location.href='Gift index.html'
                }
                function retrun_to_gift2(){
                    sessionStorage.setItem('ck','0');
                    location.href='Gift index.html'
                }
            } else if(type === '猜拳') {
                const AI = document.querySelector('.guesses');
                const lastResult = document.querySelector('.lastResult');
                const Ply = document.querySelector('.lOrh');
                const guessSubmit = document.querySelector('.guessSubmit');
                const countTime = document.querySelector('.guessesTime');
                const guessField = document.querySelector('.guessField');
                guessField.disabled = true;
                guessSubmit.disabled = true;
                let radomNum;
                let roundCount = 1;
                let win = 0;
                let BA;
                let BB;
                let BC;
                var AIoutput='0';
                var YrOutput='0';
                var i=0;
                const title = document.querySelector('.title');
                const text = document.querySelector('.text');
                title.textContent='猜拳！'
                text.textContent='猜拳！你可以出石头剪刀布，11局6胜！（这个游戏绝对公正！！！）'
                function round() {
                    if(roundCount != 13) {
                    radomNum = Math.floor(Math.random() * 3) + 1;
                    if(win<5) {
                        countTime.textContent= '这是第' + roundCount + '局' +' 你已经赢了' + win + '局';
                        if(radomNum == 1) {
                            AIoutput = '石头';
                        } else if (radomNum == 2){
                            AIoutput = '剪刀';
                        } else {
                            AIoutput = '布';
                        }
                        AI.textContent = '对手出拳：' + AIoutput ;
                        Ply.textContent = '你的出拳:' + YrOutput;
                        if(YrOutput === '石头') {
                            if (AIoutput === '剪刀') {
                                lastResult.textContent='可恶啊，竟然让你赢了一局';
                                win++;
                            } else if(AIoutput === '布') {
                                lastResult.textContent='啊哈，我赢了！';
                            } else {
                                lastResult.textContent='喂喂，竟然平局了';
                            }
                        }
                        if(YrOutput === '剪刀') {
                            if (AIoutput === '布') {
                                lastResult.textContent='可恶啊，竟然让你赢了一局';
                                win++;
                            } else if (AIoutput === '石头') {
                                lastResult.textContent='啊哈，我赢了！';
                            } else {
                                lastResult.textContent='喂喂，竟然平局了';
                            }
                        }
                        if(YrOutput === '布') {
                            if (AIoutput === '石头') {
                                lastResult.textContent='可恶啊，竟然让你赢了一局';
                                win++;
                            } else if (AIoutput === '剪刀') {
                                lastResult.textContent='啊哈，我赢了！';
                            } else {
                                lastResult.textContent='喂喂，竟然平局了';
                            }
                        }
                        if(YrOutput != AIoutput) {roundCount++;}
                        if(roundCount == 12) {
                            lastResult.textContent='诶，你输了...';
                            setGameOver2();
                            roundCount++;
                        }
                    } else {
                        countTime.textContent= '这是第' + roundCount + '局' +' 你已经赢了' + win + '局';
                        if(YrOutput === '剪刀') {
                            AIoutput = '石头';
                        } else if (YrOutput === '布'){
                            AIoutput = '剪刀';
                        } else {
                            AIoutput = '布';
                        }
                        AI.textContent = '对手出拳：' + AIoutput ;
                        Ply.textContent = '你的出拳:' + YrOutput;
                        if(radomNum == 1) {
                            lastResult.textContent='嘿嘿，我赢了';
                        } else if (radomNum == 2){
                            lastResult.textContent='诶呀，我赢了呢';
                        } else {
                            lastResult.textContent='哼哼，我又赢了';
                        }
                        roundCount++;
                        if(roundCount == 12) {
                            lastResult.textContent='嘿嘿，你输了...';
                            setGameOver1();
                            roundCount++;
                        }
                    }
                    }
                }
                setButtonA();
                setButtonB();
                setButtonC();
                //
                function listenA(){
                    document.getElementById("rock").onclick = function() {
                        YrOutput='石头';
                    }
                    BA.addEventListener('click',round);
                }
                function listenB(){
                    document.getElementById("scissors").onclick = function() {
                        YrOutput='剪刀';
                    }
                    BB.addEventListener('click', round);
                }       
                function listenC(){
                    document.getElementById("cloth").onclick = function() {
                        YrOutput='布';
                    }
                    BC.addEventListener('click', round);
                }       
                function setButtonA(){
                    BA = document.createElement('a2');
                    BA.textContent = '石头';
                    BA.id='rock';
                    document.body.appendChild(BA);
                    listenA();
                }
                function setButtonB(){
                    BB = document.createElement('a2');
                    BB.textContent = '剪刀';
                    BB.id='scissors';
                    document.body.appendChild(BB);
                    listenB();
                }
                function setButtonC(){
                    BC = document.createElement('a2');
                    BC.textContent = '布';
                    BC.id='cloth';
                    document.body.appendChild(BC);
                    listenC();
                }
                function set( x ){
                    AIoutput=x;
                }
                function setGameOver1(){
                    guessField.disabled = true;
                    guessSubmit.disabled = true;
                    resetButton = document.createElement('a1');
                    resetButton.textContent = '返回 Back';
                    document.body.appendChild(resetButton);
                    resetButton.addEventListener('click', retrun_to_gift1);
                }
                function setGameOver2(){
                    BA.disabled = true;
                    BB.disabled = true;
                    BC.disabled = true;
                    resetButton = document.createElement('a1');
                    resetButton.textContent = '返回 Back';
                    document.body.appendChild(resetButton);
                    resetButton.addEventListener('click', retrun_to_gift2);
                }
                function retrun_to_gift1(){
                    if(i == 0) {
                        i = 1;
                    lastResult.textContent='好吧好吧，不骗你了！'
                    setTimeout(function(){lastResult.textContent='诶嘿，我确实做弊了一下';},4000);
                    setTimeout(function(){lastResult.textContent='诶呀，这次算我输啦，呐，回去吧！';},8000);
                    setTimeout(function(){ret();},10000);
                    }
                }
                function ret(){
                    sessionStorage.setItem('dk','1');
                    location.href='Gift index.html';
                }
                function retrun_to_gift2(){
                    sessionStorage.setItem('dk','0');
                    location.href='Gift index.html';
                }
            }
            };
        </script>
    </body>
    </html>
